package calls

import (
	"context"
	"errors"
	gomath "math"
	"math/big"
	"strings"

	"github.com/ethereum/go-ethereum/core/types"
	"github.com/rs/zerolog/log"

	"github.com/ChainSafe/chainbridge-core/chains/evm/evmclient"
	"github.com/ethereum/go-ethereum"
	"github.com/ethereum/go-ethereum/common"
	"github.com/ethereum/go-ethereum/common/hexutil"
)

// UTILS

type ChainClient interface {
	SignAndSendTransaction(ctx context.Context, tx evmclient.CommonTransaction) (common.Hash, error)
	CallContract(ctx context.Context, callArgs map[string]interface{}, blockNumber *big.Int) ([]byte, error)
	WaitAndReturnTxReceipt(h common.Hash) (*types.Receipt, error)
	CodeAt(ctx context.Context, contract common.Address, blockNumber *big.Int) ([]byte, error)
	UnsafeNonce() (*big.Int, error)
	LockNonce()
	UnlockNonce()
	UnsafeIncreaseNonce() error
	GasPrice() (*big.Int, error)
	From() common.Address
	Simulate(block *big.Int, txHash common.Hash, fromAddress common.Address) ([]byte, error)
}

const BridgeABI = "[{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"domainID\",\"type\":\"uint8\"},{\"internalType\":\"address[]\",\"name\":\"initialRelayers\",\"type\":\"address[]\"},{\"internalType\":\"uint256\",\"name\":\"initialRelayerThreshold\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"destinationDomainID\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"resourceID\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"depositNonce\",\"type\":\"uint64\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"},{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"handlerResponse\",\"type\":\"bytes\"}],\"name\":\"Deposit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"Paused\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"originDomainID\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"depositNonce\",\"type\":\"uint64\"},{\"indexed\":false,\"internalType\":\"enum Bridge.ProposalStatus\",\"name\":\"status\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"dataHash\",\"type\":\"bytes32\"}],\"name\":\"ProposalEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint8\",\"name\":\"originDomainID\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"depositNonce\",\"type\":\"uint64\"},{\"indexed\":false,\"internalType\":\"enum Bridge.ProposalStatus\",\"name\":\"status\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"dataHash\",\"type\":\"bytes32\"}],\"name\":\"ProposalVote\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"relayer\",\"type\":\"address\"}],\"name\":\"RelayerAdded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"relayer\",\"type\":\"address\"}],\"name\":\"RelayerRemoved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newThreshold\",\"type\":\"uint256\"}],\"name\":\"RelayerThresholdChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"RoleGranted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"RoleRevoked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"Unpaused\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"DEFAULT_ADMIN_ROLE\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MAX_RELAYERS\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"RELAYER_ROLE\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"name\":\"_depositCounts\",\"outputs\":[{\"internalType\":\"uint64\",\"name\":\"\",\"type\":\"uint64\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"_domainID\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"_expiry\",\"outputs\":[{\"internalType\":\"uint40\",\"name\":\"\",\"type\":\"uint40\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"_fee\",\"outputs\":[{\"internalType\":\"uint128\",\"name\":\"\",\"type\":\"uint128\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"_relayerThreshold\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"_resourceIDToHandlerAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"}],\"name\":\"getRoleAdmin\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"getRoleMember\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"}],\"name\":\"getRoleMemberCount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"getRoleMemberIndex\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"grantRole\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"hasRole\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"paused\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"renounceRole\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"revokeRole\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint72\",\"name\":\"destNonce\",\"type\":\"uint72\"},{\"internalType\":\"bytes32\",\"name\":\"dataHash\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"relayer\",\"type\":\"address\"}],\"name\":\"_hasVotedOnProposal\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"relayer\",\"type\":\"address\"}],\"name\":\"isRelayer\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newAdmin\",\"type\":\"address\"}],\"name\":\"renounceAdmin\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"adminPauseTransfers\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"adminUnpauseTransfers\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"newThreshold\",\"type\":\"uint256\"}],\"name\":\"adminChangeRelayerThreshold\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"relayerAddress\",\"type\":\"address\"}],\"name\":\"adminAddRelayer\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"relayerAddress\",\"type\":\"address\"}],\"name\":\"adminRemoveRelayer\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"handlerAddress\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"resourceID\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"tokenAddress\",\"type\":\"address\"}],\"name\":\"adminSetResource\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"handlerAddress\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"resourceID\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"contractAddress\",\"type\":\"address\"},{\"internalType\":\"bytes4\",\"name\":\"depositFunctionSig\",\"type\":\"bytes4\"},{\"internalType\":\"uint256\",\"name\":\"depositFunctionDepositerOffset\",\"type\":\"uint256\"},{\"internalType\":\"bytes4\",\"name\":\"executeFunctionSig\",\"type\":\"bytes4\"}],\"name\":\"adminSetGenericResource\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"handlerAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"tokenAddress\",\"type\":\"address\"}],\"name\":\"adminSetBurnable\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"domainID\",\"type\":\"uint8\"},{\"internalType\":\"uint64\",\"name\":\"nonce\",\"type\":\"uint64\"}],\"name\":\"adminSetDepositNonce\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"originDomainID\",\"type\":\"uint8\"},{\"internalType\":\"uint64\",\"name\":\"depositNonce\",\"type\":\"uint64\"},{\"internalType\":\"bytes32\",\"name\":\"dataHash\",\"type\":\"bytes32\"}],\"name\":\"getProposal\",\"outputs\":[{\"components\":[{\"internalType\":\"enum Bridge.ProposalStatus\",\"name\":\"_status\",\"type\":\"uint8\"},{\"internalType\":\"uint200\",\"name\":\"_yesVotes\",\"type\":\"uint200\"},{\"internalType\":\"uint8\",\"name\":\"_yesVotesTotal\",\"type\":\"uint8\"},{\"internalType\":\"uint40\",\"name\":\"_proposedBlock\",\"type\":\"uint40\"}],\"internalType\":\"struct Bridge.Proposal\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"_totalRelayers\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"newFee\",\"type\":\"uint256\"}],\"name\":\"adminChangeFee\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"handlerAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"tokenAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amountOrTokenID\",\"type\":\"uint256\"}],\"name\":\"adminWithdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"destinationDomainID\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"resourceID\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"deposit\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"domainID\",\"type\":\"uint8\"},{\"internalType\":\"uint64\",\"name\":\"depositNonce\",\"type\":\"uint64\"},{\"internalType\":\"bytes32\",\"name\":\"resourceID\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"dataHash\",\"type\":\"bytes32\"}],\"name\":\"voteProposal\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"domainID\",\"type\":\"uint8\"},{\"internalType\":\"uint64\",\"name\":\"depositNonce\",\"type\":\"uint64\"},{\"internalType\":\"bytes32\",\"name\":\"dataHash\",\"type\":\"bytes32\"}],\"name\":\"cancelProposal\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint8\",\"name\":\"domainID\",\"type\":\"uint8\"},{\"internalType\":\"uint64\",\"name\":\"depositNonce\",\"type\":\"uint64\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"},{\"internalType\":\"bytes32\",\"name\":\"resourceID\",\"type\":\"bytes32\"}],\"name\":\"executeProposal\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address payable[]\",\"name\":\"addrs\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"amounts\",\"type\":\"uint256[]\"}],\"name\":\"transferFunds\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]"
const BridgeBin = "60806040523480156200001157600080fd5b50604051620032a0380380620032a08339810160408190526200003491620003a3565b6000805460ff199081169091556002805490911660ff871617905562000066836200016d602090811b6200189217901c565b600260016101000a81548160ff021916908360ff1602179055506200009682620001a060201b620018b91760201c565b6002806101000a8154816001600160801b0302191690836001600160801b03160217905550620000d181620001c860201b620018de1760201c565b6002805464ffffffffff92909216600160901b0264ffffffffff60901b1990921691909117905562000105600033620001f2565b60005b84518110156200016157620001587fe2b7fb3b832174769106daebcfd6d1970523240dda11281102db9363b83b0dc48683815181106200014457fe5b60200260200101516200020260201b60201c565b60010162000108565b505050505050620005cb565b600061010082106200019c5760405162461bcd60e51b815260040162000193906200053a565b60405180910390fd5b5090565b6000600160801b82106200019c5760405162461bcd60e51b81526004016200019390620004cc565b60006501000000000082106200019c5760405162461bcd60e51b8152600401620001939062000503565b620001fe828262000248565b5050565b600082815260016020526040902060020154620002299062000223620002c3565b620002c7565b620001f25760405162461bcd60e51b815260040162000193906200047d565b60008281526001602090815260409091206200026f91839062001905620002f6821b17901c565b15620001fe576200027f620002c3565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b3390565b60008281526001602090815260408220620002ed9184906200191a6200030d821b17901c565b90505b92915050565b6000620002ed836001600160a01b03841662000324565b6000620002ed836001600160a01b03841662000373565b600062000332838362000373565b6200036a57508154600181810184556000848152602080822090930184905584548482528286019093526040902091909155620002f0565b506000620002f0565b60009081526001919091016020526040902054151590565b80516001600160a01b0381168114620002f057600080fd5b600080600080600060a08688031215620003bb578081fd5b8551620003c881620005b8565b602087810151919650906001600160401b03811115620003e6578283fd5b8701601f81018913620003f7578283fd5b80516200040e620004088262000598565b62000571565b81815283810190838501858402850186018d10156200042b578687fd5b8694505b838510156200045957620004448d826200038b565b8352600194909401939185019185016200042f565b5060408b015160608c01516080909c01519a9d919c509a9998509650505050505050565b6020808252602f908201527f416363657373436f6e74726f6c3a2073656e646572206d75737420626520616e60408201526e0818591b5a5b881d1bc819dc985b9d608a1b606082015260800190565b6020808252601e908201527f76616c756520646f6573206e6f742066697420696e2031323820626974730000604082015260600190565b6020808252601d908201527f76616c756520646f6573206e6f742066697420696e2034302062697473000000604082015260600190565b6020808252601c908201527f76616c756520646f6573206e6f742066697420696e2038206269747300000000604082015260600190565b6040518181016001600160401b03811182821017156200059057600080fd5b604052919050565b60006001600160401b03821115620005ae578081fd5b5060209081020190565b60ff81168114620005c857600080fd5b50565b612cc580620005db6000396000f3fe6080604052600436106102305760003560e01c806384db809f1161012e578063a9cf69fa116100ab578063cdb0f73a1161006f578063cdb0f73a14610678578063d547741f14610698578063d7a9cd79146106b8578063edc20c3c146106cd578063ffaac0eb146106ed57610230565b8063a9cf69fa146105c7578063c5b37c22146105f4578063c5ec897014610616578063ca15c87314610638578063cb10f2151461065857610230565b8063926d7d7f116100f2578063926d7d7f146105465780639d82dd631461055b5780639dd694f41461057b5780639debb3bd1461059d578063a217fddf146105b257610230565b806384db809f146104995780638c0c2631146104c65780639010d07c146104e657806391c404ac1461050657806391d148541461052657610230565b80634e056005116101bc5780635e1fab0f116101805780635e1fab0f1461040f578063780cf0041461042f5780637febe63f1461044f578063802aabe81461046f57806380ae1c281461048457610230565b80634e0560051461036d5780634e0df3f61461038d578063541d5548146103ad5780635a1ad87c146103da5780635c975abb146103fa57610230565b80632f2ff15d116102035780632f2ff15d146102c057806336568abe146102e05780634454b20d146103005780634603ae38146103205780634b0b919d1461034057610230565b806305e2ca171461023557806317f03ce51461024a5780631ff013f11461026a578063248a9ca31461028a575b600080fd5b6102486102433660046121cc565b610702565b005b34801561025657600080fd5b5061024861026536600461224a565b610892565b34801561027657600080fd5b50610248610285366004612287565b610aae565b34801561029657600080fd5b506102aa6102a5366004612090565b610e52565b6040516102b791906123f8565b60405180910390f35b3480156102cc57600080fd5b506102486102db3660046120a8565b610e67565b3480156102ec57600080fd5b506102486102fb3660046120a8565b610eaf565b34801561030c57600080fd5b5061024861031b3660046122cb565b610ef1565b34801561032c57600080fd5b5061024861033b366004612028565b611058565b34801561034c57600080fd5b5061036061035b3660046121b1565b6110e6565b6040516102b79190612b2e565b34801561037957600080fd5b50610248610388366004612090565b611101565b34801561039957600080fd5b506102aa6103a83660046120a8565b611166565b3480156103b957600080fd5b506103cd6103c8366004611ed4565b611192565b6040516102b791906123ed565b3480156103e657600080fd5b506102486103f5366004611fb9565b6111ac565b34801561040657600080fd5b506103cd611246565b34801561041b57600080fd5b5061024861042a366004611ed4565b61124f565b34801561043b57600080fd5b5061024861044a366004611f28565b611299565b34801561045b57600080fd5b506103cd61046a366004612187565b61130c565b34801561047b57600080fd5b506102aa6113a4565b34801561049057600080fd5b506102486113c2565b3480156104a557600080fd5b506104b96104b4366004612090565b6113d4565b6040516102b791906123b5565b3480156104d257600080fd5b506102486104e1366004611ef0565b6113ef565b3480156104f257600080fd5b506104b96105013660046120cc565b61145c565b34801561051257600080fd5b50610248610521366004612090565b61147b565b34801561053257600080fd5b506103cd6105413660046120a8565b6114e5565b34801561055257600080fd5b506102aa6114fd565b34801561056757600080fd5b50610248610576366004611ed4565b61150f565b34801561058757600080fd5b5061059061158a565b6040516102b79190612b42565b3480156105a957600080fd5b506102aa611593565b3480156105be57600080fd5b506102aa611598565b3480156105d357600080fd5b506105e76105e236600461224a565b61159d565b6040516102b79190612abe565b34801561060057600080fd5b5061060961164c565b6040516102b79190612b08565b34801561062257600080fd5b5061062b611661565b6040516102b79190612b1c565b34801561064457600080fd5b506102aa610653366004612090565b611675565b34801561066457600080fd5b50610248610673366004611f78565b61168c565b34801561068457600080fd5b50610248610693366004611ed4565b61171d565b3480156106a457600080fd5b506102486106b33660046120a8565b6117c0565b3480156106c457600080fd5b506105906117fa565b3480156106d957600080fd5b506102486106e8366004612218565b611808565b3480156106f957600080fd5b50610248611882565b61070a61192f565b6002546201000090046001600160801b031634146107435760405162461bcd60e51b815260040161073a906126a9565b60405180910390fd5b6000838152600460205260409020546001600160a01b0316806107785760405162461bcd60e51b815260040161073a90612747565b60ff851660009081526003602052604090819020805467ffffffffffffffff19811660016001600160401b039283160191821617909155905163b07e54bb60e01b815282906060906001600160a01b0383169063b07e54bb906107e5908a9033908b908b90600401612418565b600060405180830381600087803b1580156107ff57600080fd5b505af1158015610813573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261083b91908101906120ed565b9050336001600160a01b03167f17bc3181e17a9620a479c24e6c606e474ba84fc036877b768926872e8cd0e11f8989868a8a8760405161088096959493929190612b50565b60405180910390a25050505050505050565b61089a611952565b68ffffffffffffffff00600883901b1660ff8416176108b7611dfc565b6001600160481b0382166000908152600560209081526040808320868452909152908190208151608081019092528054829060ff1660048111156108f757fe5b600481111561090257fe5b8152905461010081046001600160c81b03166020830152600160d01b810460ff166040830152600160d81b900464ffffffffff166060909101528051909150600181600481111561094f57fe5b14806109665750600281600481111561096457fe5b145b6109825760405162461bcd60e51b815260040161073a906126d9565b600254606083015164ffffffffff600160901b9092048216916109a791439116611997565b64ffffffffff16116109cb5760405162461bcd60e51b815260040161073a90612838565b60048083526001600160481b03841660009081526005602090815260408083208884529091529020835181548593839160ff1916906001908490811115610a0e57fe5b02179055506020820151815460408085015160609095015164ffffffffff16600160d81b026001600160d81b0360ff909616600160d01b0260ff60d01b196001600160c81b0390951661010002610100600160d01b03199094169390931793909316919091179390931617905551600080516020612c5083398151915290610a9e90889088906004908990612ba1565b60405180910390a1505050505050565b610ab66119d9565b610abe61192f565b68ffffffffffffffff00600884901b1660ff851617610adb611dfc565b6001600160481b0382166000908152600560209081526040808320868452909152908190208151608081019092528054829060ff166004811115610b1b57fe5b6004811115610b2657fe5b8152905461010081046001600160c81b0316602080840191909152600160d01b820460ff16604080850191909152600160d81b90920464ffffffffff16606090930192909252600087815260049092529020549091506001600160a01b0316610ba15760405162461bcd60e51b815260040161073a90612a38565b80516001906004811115610bb157fe5b1115610bcf5760405162461bcd60e51b815260040161073a9061294b565b610bd98133611a0d565b15610bf65760405162461bcd60e51b815260040161073a90612577565b600081516004811115610c0557fe5b1415610c6657506040805160808101825260018082526000602083018190528284015264ffffffffff4316606083015291519091600080516020612c5083398151915291610c599189918991908890612ba1565b60405180910390a1610cc8565b600254606082015164ffffffffff600160901b909204821691610c8b91439116611997565b64ffffffffff161115610cc8576004808252604051600080516020612c5083398151915291610cbf91899189918890612ba1565b60405180910390a15b600481516004811115610cd757fe5b14610d9f57610cfc610ce833611a30565b82602001516001600160c81b031617611a5e565b6001600160c81b031660208201526040808201805160010160ff169052815190517f25f8daaa4635a7729927ba3f5b3d59cc3320aca7c32c9db4e7ca7b957434364091610d4e91899189918890612ba1565b60405180910390a1600254604082015160ff6101009092048216911610610d9f576002808252604051600080516020612c5083398151915291610d9691899189918890612ba1565b60405180910390a15b6001600160481b038216600090815260056020908152604080832086845290915290208151815483929190829060ff19166001836004811115610dde57fe5b021790555060208201518154604084015160609094015164ffffffffff16600160d81b026001600160d81b0360ff909516600160d01b0260ff60d01b196001600160c81b0390941661010002610100600160d01b031990931692909217929092161792909216919091179055505050505050565b60009081526001602052604090206002015490565b600082815260016020526040902060020154610e8590610541611a83565b610ea15760405162461bcd60e51b815260040161073a90612528565b610eab8282611a87565b5050565b610eb7611a83565b6001600160a01b0316816001600160a01b031614610ee75760405162461bcd60e51b815260040161073a90612a6f565b610eab8282611af0565b610ef96119d9565b610f0161192f565b60008181526004602090815260408083205490516001600160a01b039091169268ffffffffffffffff00600889901b1660ff8a1617929091610f499185918991899101612389565b60408051601f1981840301815291815281516020928301206001600160481b03851660009081526005845282812082825290935291209091506002815460ff166004811115610f9457fe5b14610fb15760405162461bcd60e51b815260040161073a90612803565b805460ff1916600317815560405163712467f960e11b815284906001600160a01b0382169063e248cff290610fee9089908c908c90600401612479565b600060405180830381600087803b15801561100857600080fd5b505af115801561101c573d6000803e3d6000fd5b50505050600080516020612c508339815191528a8a6003866040516110449493929190612ba1565b60405180910390a150505050505050505050565b611060611b59565b60005b838110156110df5784848281811061107757fe5b905060200201602081019061108c9190611ed4565b6001600160a01b03166108fc8484848181106110a457fe5b905060200201359081150290604051600060405180830381858888f193505050501580156110d6573d6000803e3d6000fd5b50600101611063565b5050505050565b6003602052600090815260409020546001600160401b031681565b611109611b59565b61111281611892565b600260016101000a81548160ff021916908360ff1602179055507fa20d6b84cd798a24038be305eff8a45ca82ef54a2aa2082005d8e14c0a4746c88160405161115b91906123f8565b60405180910390a150565b60008281526001602081815260408084206001600160a01b038616855290920190529020545b92915050565b600061118c600080516020612c70833981519152836114e5565b6111b4611b59565b60008581526004602081905260409182902080546001600160a01b0319166001600160a01b038a16908117909155915163de319d9960e01b815288929163de319d999161120b918a918a918a918a918a9101612443565b600060405180830381600087803b15801561122557600080fd5b505af1158015611239573d6000803e3d6000fd5b5050505050505050505050565b60005460ff1690565b611257611b59565b336001600160a01b03821614156112805760405162461bcd60e51b815260040161073a90612914565b61128b600082610e67565b611296600033610eaf565b50565b6112a1611b59565b604051636ce5768960e11b815284906001600160a01b0382169063d9caed12906112d3908790879087906004016123c9565b600060405180830381600087803b1580156112ed57600080fd5b505af1158015611301573d6000803e3d6000fd5b505050505050505050565b6001600160481b0383166000908152600560209081526040808320858452909152808220815160808101909252805461139c929190829060ff16600481111561135157fe5b600481111561135c57fe5b8152905461010081046001600160c81b03166020830152600160d01b810460ff166040830152600160d81b900464ffffffffff1660609091015283611a0d565b949350505050565b60006113bd600080516020612c70833981519152611675565b905090565b6113ca611b59565b6113d2611b80565b565b6004602052600090815260409020546001600160a01b031681565b6113f7611b59565b6040516307b7ed9960e01b815282906001600160a01b038216906307b7ed99906114259085906004016123b5565b600060405180830381600087803b15801561143f57600080fd5b505af1158015611453573d6000803e3d6000fd5b50505050505050565b60008281526001602052604081206114749083611bcf565b9392505050565b611483611b59565b6002546201000090046001600160801b03168114156114b45760405162461bcd60e51b815260040161073a90612a01565b6114bd816118b9565b6002806101000a8154816001600160801b0302191690836001600160801b0316021790555050565b6000828152600160205260408120611474908361191a565b600080516020612c7083398151915281565b611527600080516020612c70833981519152826114e5565b6115435760405162461bcd60e51b815260040161073a906125d4565b61155b600080516020612c70833981519152826117c0565b7f10e1f7ce9fd7d1b90a66d13a2ab3cb8dd7f29f3f8d520b143b063ccfbab6906b8160405161115b91906123b5565b60025460ff1681565b60c881565b600081565b6115a5611dfc565b6001600160481b0360ff858116600886901b68ffffffffffffffff00161791821660009081526005602090815260408083208784529091529081902081516080810190925280549192909183911660048111156115fe57fe5b600481111561160957fe5b8152905461010081046001600160c81b03166020830152600160d01b810460ff166040830152600160d81b900464ffffffffff1660609091015295945050505050565b6002546201000090046001600160801b031681565b600254600160901b900464ffffffffff1681565b600081815260016020526040812061118c90611bdb565b611694611b59565b60008281526004602081905260409182902080546001600160a01b0319166001600160a01b0387169081179091559151635c7d1b9b60e11b815285929163b8fa3736916116e5918791879101612401565b600060405180830381600087803b1580156116ff57600080fd5b505af1158015611713573d6000803e3d6000fd5b5050505050505050565b611735600080516020612c70833981519152826114e5565b156117525760405162461bcd60e51b815260040161073a906128dd565b60c861175c6113a4565b106117795760405162461bcd60e51b815260040161073a90612679565b611791600080516020612c7083398151915282610e67565b7f03580ee9f53a62b7cb409a2cb56f9be87747dd15017afc5cef6eef321e4fb2c58160405161115b91906123b5565b6000828152600160205260409020600201546117de90610541611a83565b610ee75760405162461bcd60e51b815260040161073a906127b3565b600254610100900460ff1681565b611810611b59565b60ff82166000908152600360205260409020546001600160401b039081169082161161184e5760405162461bcd60e51b815260040161073a90612897565b60ff919091166000908152600360205260409020805467ffffffffffffffff19166001600160401b03909216919091179055565b61188a611b59565b6113d2611be6565b600061010082106118b55760405162461bcd60e51b815260040161073a90612710565b5090565b6000600160801b82106118b55760405162461bcd60e51b815260040161073a9061260b565b60006501000000000082106118b55760405162461bcd60e51b815260040161073a90612642565b6000611474836001600160a01b038416611c28565b6000611474836001600160a01b038416611c72565b60005460ff16156113d25760405162461bcd60e51b815260040161073a9061286d565b61195d6000336114e5565b8061197b575061197b600080516020612c70833981519152336114e5565b6113d25760405162461bcd60e51b815260040161073a906124f1565b600061147483836040518060400160405280601e81526020017f536166654d6174683a207375627472616374696f6e206f766572666c6f770000815250611c8a565b6119f1600080516020612c70833981519152336114e5565b6113d25760405162461bcd60e51b815260040161073a90612995565b60008083602001516001600160c81b0316611a2784611a30565b16119392505050565b6000611a54611a4d600080516020612c7083398151915284611166565b6001611997565b6001901b92915050565b6000600160c81b82106118b55760405162461bcd60e51b815260040161073a9061277c565b3390565b6000828152600160205260409020611a9f9082611905565b15610eab57611aac611a83565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6000828152600160205260409020611b089082611cb6565b15610eab57611b15611a83565b6001600160a01b0316816001600160a01b0316837ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b60405160405180910390a45050565b611b646000336114e5565b6113d25760405162461bcd60e51b815260040161073a906129ca565b611b8861192f565b6000805460ff191660011790556040517f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a25890611bc59033906123b5565b60405180910390a1565b60006114748383611ccb565b600061118c82611d10565b611bee611d14565b6000805460ff191690556040517f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa90611bc59033906123b5565b6000611c348383611c72565b611c6a5750815460018181018455600084815260208082209093018490558454848252828601909352604090209190915561118c565b50600061118c565b60009081526001919091016020526040902054151590565b60008184841115611cae5760405162461bcd60e51b815260040161073a919061249c565b505050900390565b6000611474836001600160a01b038416611d36565b81546000908210611cee5760405162461bcd60e51b815260040161073a906124af565b826000018281548110611cfd57fe5b9060005260206000200154905092915050565b5490565b60005460ff166113d25760405162461bcd60e51b815260040161073a906125a6565b60008181526001830160205260408120548015611df25783546000198083019190810190600090879083908110611d6957fe5b9060005260206000200154905080876000018481548110611d8657fe5b600091825260208083209091019290925582815260018981019092526040902090840190558654879080611db657fe5b6001900381819060005260206000200160009055905586600101600087815260200190815260200160002060009055600194505050505061118c565b600091505061118c565b604080516080810190915280600081526000602082018190526040820181905260609091015290565b60008083601f840112611e36578182fd5b5081356001600160401b03811115611e4c578182fd5b6020830191508360208083028501011115611e6657600080fd5b9250929050565b60008083601f840112611e7e578182fd5b5081356001600160401b03811115611e94578182fd5b602083019150836020828501011115611e6657600080fd5b80356001600160401b038116811461118c57600080fd5b803560ff8116811461118c57600080fd5b600060208284031215611ee5578081fd5b813561147481612c0f565b60008060408385031215611f02578081fd5b8235611f0d81612c0f565b91506020830135611f1d81612c0f565b809150509250929050565b60008060008060808587031215611f3d578182fd5b8435611f4881612c0f565b93506020850135611f5881612c0f565b92506040850135611f6881612c0f565b9396929550929360600135925050565b600080600060608486031215611f8c578283fd5b8335611f9781612c0f565b9250602084013591506040840135611fae81612c0f565b809150509250925092565b60008060008060008060c08789031215611fd1578182fd5b8635611fdc81612c0f565b9550602087013594506040870135611ff381612c0f565b9350606087013561200381612c24565b92506080870135915060a087013561201a81612c24565b809150509295509295509295565b6000806000806040858703121561203d578384fd5b84356001600160401b0380821115612053578586fd5b61205f88838901611e25565b90965094506020870135915080821115612077578384fd5b5061208487828801611e25565b95989497509550505050565b6000602082840312156120a1578081fd5b5035919050565b600080604083850312156120ba578182fd5b823591506020830135611f1d81612c0f565b600080604083850312156120de578182fd5b50508035926020909101359150565b6000602082840312156120fe578081fd5b81516001600160401b0380821115612114578283fd5b818401915084601f830112612127578283fd5b815181811115612135578384fd5b604051601f8201601f191681016020018381118282101715612155578586fd5b60405281815283820160200187101561216c578485fd5b61217d826020830160208701612bd5565b9695505050505050565b60008060006060848603121561219b578081fd5b83356001600160481b0381168114611f97578182fd5b6000602082840312156121c2578081fd5b6114748383611ec3565b600080600080606085870312156121e1578182fd5b6121eb8686611ec3565b93506020850135925060408501356001600160401b0381111561220c578283fd5b61208487828801611e6d565b6000806040838503121561222a578182fd5b823560ff8116811461223a578283fd5b91506020830135611f1d81612c3a565b60008060006060848603121561225e578081fd5b6122688585611ec3565b92506122778560208601611eac565b9150604084013590509250925092565b6000806000806080858703121561229c578182fd5b6122a68686611ec3565b935060208501356122b681612c3a565b93969395505050506040820135916060013590565b6000806000806000608086880312156122e2578283fd5b6122ec8787611ec3565b94506122fb8760208801611eac565b935060408601356001600160401b03811115612315578384fd5b61232188828901611e6d565b96999598509660600135949350505050565b60008284528282602086013780602084860101526020601f19601f85011685010190509392505050565b60008151808452612375816020860160208601612bd5565b601f01601f19169290920160200192915050565b60006bffffffffffffffffffffffff198560601b16825282846014840137910160140190815292915050565b6001600160a01b0391909116815260200190565b6001600160a01b039384168152919092166020820152604081019190915260600190565b901515815260200190565b90815260200190565b9182526001600160a01b0316602082015260400190565b8481526001600160a01b038416602082015260606040820181905260009061217d9083018486612333565b9485526001600160a01b039390931660208501526001600160e01b03199182166040850152606084015216608082015260a00190565b600084825260406020830152612493604083018486612333565b95945050505050565b600060208252611474602083018461235d565b60208082526022908201527f456e756d657261626c655365743a20696e646578206f7574206f6620626f756e604082015261647360f01b606082015260800190565b6020808252601e908201527f73656e646572206973206e6f742072656c61796572206f722061646d696e0000604082015260600190565b6020808252602f908201527f416363657373436f6e74726f6c3a2073656e646572206d75737420626520616e60408201526e0818591b5a5b881d1bc819dc985b9d608a1b606082015260800190565b6020808252601590820152741c995b185e595c88185b1c9958591e481d9bdd1959605a1b604082015260600190565b60208082526014908201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604082015260600190565b6020808252601f908201527f6164647220646f65736e277420686176652072656c6179657220726f6c652100604082015260600190565b6020808252601e908201527f76616c756520646f6573206e6f742066697420696e2031323820626974730000604082015260600190565b6020808252601d908201527f76616c756520646f6573206e6f742066697420696e2034302062697473000000604082015260600190565b6020808252601690820152751c995b185e595c9cc81b1a5b5a5d081c995858da195960521b604082015260600190565b602080825260169082015275125b98dbdc9c9958dd08199959481cdd5c1c1b1a595960521b604082015260600190565b6020808252601c908201527f50726f706f73616c2063616e6e6f742062652063616e63656c6c656400000000604082015260600190565b6020808252601c908201527f76616c756520646f6573206e6f742066697420696e2038206269747300000000604082015260600190565b6020808252818101527f7265736f757263654944206e6f74206d617070656420746f2068616e646c6572604082015260600190565b6020808252601e908201527f76616c756520646f6573206e6f742066697420696e2032303020626974730000604082015260600190565b60208082526030908201527f416363657373436f6e74726f6c3a2073656e646572206d75737420626520616e60408201526f2061646d696e20746f207265766f6b6560801b606082015260800190565b6020808252818101527f50726f706f73616c206d75737420686176652050617373656420737461747573604082015260600190565b6020808252818101527f50726f706f73616c206e6f7420617420657870697279207468726573686f6c64604082015260600190565b60208082526010908201526f14185d5cd8589b194e881c185d5cd95960821b604082015260600190565b60208082526026908201527f446f6573206e6f7420616c6c6f772064656372656d656e7473206f6620746865604082015265206e6f6e636560d01b606082015260800190565b6020808252601e908201527f6164647220616c7265616479206861732072656c6179657220726f6c65210000604082015260600190565b60208082526017908201527f43616e6e6f742072656e6f756e6365206f6e6573656c66000000000000000000604082015260600190565b6020808252602a908201527f70726f706f73616c20616c7265616479207061737365642f65786563757465646040820152690bd8d85b98d95b1b195960b21b606082015260800190565b6020808252818101527f73656e64657220646f65736e277420686176652072656c6179657220726f6c65604082015260600190565b6020808252601e908201527f73656e64657220646f65736e277420686176652061646d696e20726f6c650000604082015260600190565b6020808252601f908201527f43757272656e742066656520697320657175616c20746f206e65772066656500604082015260600190565b60208082526019908201527f6e6f2068616e646c657220666f72207265736f75726365494400000000000000604082015260600190565b6020808252602f908201527f416363657373436f6e74726f6c3a2063616e206f6e6c792072656e6f756e636560408201526e103937b632b9903337b91039b2b63360891b606082015260800190565b81516080820190612ace81612c05565b82526020838101516001600160c81b03169083015260408084015160ff169083015260609283015164ffffffffff16929091019190915290565b6001600160801b0391909116815260200190565b64ffffffffff91909116815260200190565b6001600160401b0391909116815260200190565b60ff91909116815260200190565b600060ff881682528660208301526001600160401b038616604083015260a06060830152612b8260a083018587612333565b8281036080840152612b94818561235d565b9998505050505050505050565b60ff851681526001600160401b038416602082015260808101612bc384612c05565b60408201939093526060015292915050565b60005b83811015612bf0578181015183820152602001612bd8565b83811115612bff576000848401525b50505050565b6005811061129657fe5b6001600160a01b038116811461129657600080fd5b6001600160e01b03198116811461129657600080fd5b6001600160401b038116811461129657600080fdfe968626a768e76ba1363efe44e322a6c4900c5f084e0b45f35e294dfddaa9e0d5e2b7fb3b832174769106daebcfd6d1970523240dda11281102db9363b83b0dc4a2646970667358221220de3619f60ce737c5004c87c29f5f6a4551d8b8d613c8efdd5ab28f816d66408864736f6c634300060c0033"

const ERC20PresetMinterPauserABI = "[{\"inputs\":[{\"internalType\":\"string\",\"name\":\"name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"symbol\",\"type\":\"string\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"Paused\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"previousAdminRole\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"newAdminRole\",\"type\":\"bytes32\"}],\"name\":\"RoleAdminChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"RoleGranted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"RoleRevoked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"Unpaused\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"DEFAULT_ADMIN_ROLE\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MINTER_ROLE\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"PAUSER_ROLE\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"}],\"name\":\"allowance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"burn\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"burnFrom\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"decimals\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"\",\"type\":\"uint8\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"subtractedValue\",\"type\":\"uint256\"}],\"name\":\"decreaseAllowance\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"}],\"name\":\"getRoleAdmin\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"getRoleMember\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"}],\"name\":\"getRoleMemberCount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"grantRole\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"hasRole\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"addedValue\",\"type\":\"uint256\"}],\"name\":\"increaseAllowance\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"paused\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"renounceRole\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"role\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"revokeRole\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"mint\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"pause\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"unpause\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]"
const ERC20PresetMinterPauserBin = "60806040523480156200001157600080fd5b5060405162001ce738038062001ce7833981810160405260408110156200003757600080fd5b81019080805160405193929190846401000000008211156200005857600080fd5b9083019060208201858111156200006e57600080fd5b82516401000000008111828201881017156200008957600080fd5b82525081516020918201929091019080838360005b83811015620000b85781810151838201526020016200009e565b50505050905090810190601f168015620000e65780820380516001836020036101000a031916815260200191505b50604052602001805160405193929190846401000000008211156200010a57600080fd5b9083019060208201858111156200012057600080fd5b82516401000000008111828201881017156200013b57600080fd5b82525081516020918201929091019080838360005b838110156200016a57818101518382015260200162000150565b50505050905090810190601f168015620001985780820380516001836020036101000a031916815260200191505b50604052505082518391508290620001b890600490602085019062000375565b508051620001ce90600590602084019062000375565b50506006805461ff001960ff1990911660121716905550620001fb6000620001f562000261565b62000265565b6200022a7f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a6620001f562000261565b620002597f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a620001f562000261565b505062000411565b3390565b62000271828262000275565b5050565b6000828152602081815260409091206200029a91839062000be7620002ee821b17901c565b156200027157620002aa62000261565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b600062000305836001600160a01b0384166200030e565b90505b92915050565b60006200031c83836200035d565b620003545750815460018181018455600084815260208082209093018490558454848252828601909352604090209190915562000308565b50600062000308565b60009081526001919091016020526040902054151590565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620003b857805160ff1916838001178555620003e8565b82800160010185558215620003e8579182015b82811115620003e8578251825591602001919060010190620003cb565b50620003f6929150620003fa565b5090565b5b80821115620003f65760008155600101620003fb565b6118c680620004216000396000f3fe608060405234801561001057600080fd5b50600436106101a95760003560e01c806370a08231116100f9578063a457c2d711610097578063d539139311610071578063d53913931461051f578063d547741f14610527578063dd62ed3e14610553578063e63ab1e914610581576101a9565b8063a457c2d7146104aa578063a9059cbb146104d6578063ca15c87314610502576101a9565b80639010d07c116100d35780639010d07c1461042f57806391d148541461046e57806395d89b411461049a578063a217fddf146104a2576101a9565b806370a08231146103d557806379cc6790146103fb5780638456cb5914610427576101a9565b8063313ce567116101665780633f4ba83a116101405780633f4ba83a1461037c57806340c10f191461038457806342966c68146103b05780635c975abb146103cd576101a9565b8063313ce5671461030657806336568abe146103245780633950935114610350576101a9565b806306fdde03146101ae578063095ea7b31461022b57806318160ddd1461026b57806323b872dd14610285578063248a9ca3146102bb5780632f2ff15d146102d8575b600080fd5b6101b6610589565b6040805160208082528351818301528351919283929083019185019080838360005b838110156101f05781810151838201526020016101d8565b50505050905090810190601f16801561021d5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6102576004803603604081101561024157600080fd5b506001600160a01b03813516906020013561061f565b604080519115158252519081900360200190f35b61027361063d565b60408051918252519081900360200190f35b6102576004803603606081101561029b57600080fd5b506001600160a01b03813581169160208101359091169060400135610643565b610273600480360360208110156102d157600080fd5b50356106ca565b610304600480360360408110156102ee57600080fd5b50803590602001356001600160a01b03166106df565b005b61030e61074b565b6040805160ff9092168252519081900360200190f35b6103046004803603604081101561033a57600080fd5b50803590602001356001600160a01b0316610754565b6102576004803603604081101561036657600080fd5b506001600160a01b0381351690602001356107b5565b610304610803565b6103046004803603604081101561039a57600080fd5b506001600160a01b038135169060200135610874565b610304600480360360208110156103c657600080fd5b50356108e5565b6102576108f9565b610273600480360360208110156103eb57600080fd5b50356001600160a01b0316610907565b6103046004803603604081101561041157600080fd5b506001600160a01b038135169060200135610922565b61030461097c565b6104526004803603604081101561044557600080fd5b50803590602001356109eb565b604080516001600160a01b039092168252519081900360200190f35b6102576004803603604081101561048457600080fd5b50803590602001356001600160a01b0316610a0a565b6101b6610a22565b610273610a83565b610257600480360360408110156104c057600080fd5b506001600160a01b038135169060200135610a88565b610257600480360360408110156104ec57600080fd5b506001600160a01b038135169060200135610af0565b6102736004803603602081101561051857600080fd5b5035610b04565b610273610b1b565b6103046004803603604081101561053d57600080fd5b50803590602001356001600160a01b0316610b3f565b6102736004803603604081101561056957600080fd5b506001600160a01b0381358116916020013516610b98565b610273610bc3565b60048054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152606093909290918301828280156106155780601f106105ea57610100808354040283529160200191610615565b820191906000526020600020905b8154815290600101906020018083116105f857829003601f168201915b5050505050905090565b600061063361062c610bfc565b8484610c00565b5060015b92915050565b60035490565b6000610650848484610cec565b6106c08461065c610bfc565b6106bb856040518060600160405280602881526020016116f0602891396001600160a01b038a1660009081526002602052604081209061069a610bfc565b6001600160a01b031681526020810191909152604001600020549190610e49565b610c00565b5060019392505050565b60009081526020819052604090206002015490565b600082815260208190526040902060020154610702906106fd610bfc565b610a0a565b61073d5760405162461bcd60e51b815260040180806020018281038252602f8152602001806115ee602f913960400191505060405180910390fd5b6107478282610ee0565b5050565b60065460ff1690565b61075c610bfc565b6001600160a01b0316816001600160a01b0316146107ab5760405162461bcd60e51b815260040180806020018281038252602f815260200180611838602f913960400191505060405180910390fd5b6107478282610f49565b60006106336107c2610bfc565b846106bb85600260006107d3610bfc565b6001600160a01b03908116825260208083019390935260409182016000908120918c168152925290205490610fb2565b61082f7f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a6106fd610bfc565b61086a5760405162461bcd60e51b815260040180806020018281038252603981526020018061163f6039913960400191505060405180910390fd5b61087261100c565b565b6108a07f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a66106fd610bfc565b6108db5760405162461bcd60e51b81526004018080602001828103825260368152602001806117186036913960400191505060405180910390fd5b61074782826110ad565b6108f66108f0610bfc565b8261119f565b50565b600654610100900460ff1690565b6001600160a01b031660009081526001602052604090205490565b60006109598260405180606001604052806024815260200161174e602491396109528661094d610bfc565b610b98565b9190610e49565b905061096d83610967610bfc565b83610c00565b610977838361119f565b505050565b6109a87f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a6106fd610bfc565b6109e35760405162461bcd60e51b81526004018080602001828103825260378152602001806117dc6037913960400191505060405180910390fd5b61087261129b565b6000828152602081905260408120610a039083611320565b9392505050565b6000828152602081905260408120610a03908361132c565b60058054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152606093909290918301828280156106155780601f106105ea57610100808354040283529160200191610615565b600081565b6000610633610a95610bfc565b846106bb856040518060600160405280602581526020016118136025913960026000610abf610bfc565b6001600160a01b03908116825260208083019390935260409182016000908120918d16815292529020549190610e49565b6000610633610afd610bfc565b8484610cec565b600081815260208190526040812061063790611341565b7f9f2df0fed2c77648de5860a4cc508cd0818c85b8b8a1ab4ceeef8d981c8956a681565b600082815260208190526040902060020154610b5d906106fd610bfc565b6107ab5760405162461bcd60e51b81526004018080602001828103825260308152602001806116c06030913960400191505060405180910390fd5b6001600160a01b03918216600090815260026020908152604080832093909416825291909152205490565b7f65d7a28e3265b37a6474929f336521b332c1681b933f6cb9f3376673440d862a81565b6000610a03836001600160a01b03841661134c565b3390565b6001600160a01b038316610c455760405162461bcd60e51b81526004018080602001828103825260248152602001806117b86024913960400191505060405180910390fd5b6001600160a01b038216610c8a5760405162461bcd60e51b81526004018080602001828103825260228152602001806116786022913960400191505060405180910390fd5b6001600160a01b03808416600081815260026020908152604080832094871680845294825291829020859055815185815291517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259281900390910190a3505050565b6001600160a01b038316610d315760405162461bcd60e51b81526004018080602001828103825260258152602001806117936025913960400191505060405180910390fd5b6001600160a01b038216610d765760405162461bcd60e51b81526004018080602001828103825260238152602001806115cb6023913960400191505060405180910390fd5b610d81838383611396565b610dbe8160405180606001604052806026815260200161169a602691396001600160a01b0386166000908152600160205260409020549190610e49565b6001600160a01b038085166000908152600160205260408082209390935590841681522054610ded9082610fb2565b6001600160a01b0380841660008181526001602090815260409182902094909455805185815290519193928716927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef92918290030190a3505050565b60008184841115610ed85760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b83811015610e9d578181015183820152602001610e85565b50505050905090810190601f168015610eca5780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b505050900390565b6000828152602081905260409020610ef89082610be7565b1561074757610f05610bfc565b6001600160a01b0316816001600160a01b0316837f2f8788117e7eff1d82e926ec794901d17c78024a50270940304540a733656f0d60405160405180910390a45050565b6000828152602081905260409020610f6190826113a1565b1561074757610f6e610bfc565b6001600160a01b0316816001600160a01b0316837ff6391f5c32d9c69d2a47ea670b442974b53935d1edc7fd64eb21e047a839171b60405160405180910390a45050565b600082820183811015610a03576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b6110146108f9565b61105c576040805162461bcd60e51b815260206004820152601460248201527314185d5cd8589b194e881b9bdd081c185d5cd95960621b604482015290519081900360640190fd5b6006805461ff00191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa611090610bfc565b604080516001600160a01b039092168252519081900360200190a1565b6001600160a01b038216611108576040805162461bcd60e51b815260206004820152601f60248201527f45524332303a206d696e7420746f20746865207a65726f206164647265737300604482015290519081900360640190fd5b61111460008383611396565b6003546111219082610fb2565b6003556001600160a01b0382166000908152600160205260409020546111479082610fb2565b6001600160a01b03831660008181526001602090815260408083209490945583518581529351929391927fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9281900390910190a35050565b6001600160a01b0382166111e45760405162461bcd60e51b81526004018080602001828103825260218152602001806117726021913960400191505060405180910390fd5b6111f082600083611396565b61122d8160405180606001604052806022815260200161161d602291396001600160a01b0385166000908152600160205260409020549190610e49565b6001600160a01b03831660009081526001602052604090205560035461125390826113b6565b6003556040805182815290516000916001600160a01b038516917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9181900360200190a35050565b6112a36108f9565b156112e8576040805162461bcd60e51b815260206004820152601060248201526f14185d5cd8589b194e881c185d5cd95960821b604482015290519081900360640190fd5b6006805461ff0019166101001790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a258611090610bfc565b6000610a038383611413565b6000610a03836001600160a01b038416611477565b60006106378261148f565b60006113588383611477565b61138e57508154600181810184556000848152602080822090930184905584548482528286019093526040902091909155610637565b506000610637565b610977838383611493565b6000610a03836001600160a01b0384166114e2565b60008282111561140d576040805162461bcd60e51b815260206004820152601e60248201527f536166654d6174683a207375627472616374696f6e206f766572666c6f770000604482015290519081900360640190fd5b50900390565b815460009082106114555760405162461bcd60e51b81526004018080602001828103825260228152602001806115a96022913960400191505060405180910390fd5b82600001828154811061146457fe5b9060005260206000200154905092915050565b60009081526001919091016020526040902054151590565b5490565b61149e838383610977565b6114a66108f9565b156109775760405162461bcd60e51b815260040180806020018281038252602a815260200180611867602a913960400191505060405180910390fd5b6000818152600183016020526040812054801561159e578354600019808301919081019060009087908390811061151557fe5b906000526020600020015490508087600001848154811061153257fe5b60009182526020808320909101929092558281526001898101909252604090209084019055865487908061156257fe5b60019003818190600052602060002001600090559055866001016000878152602001908152602001600020600090556001945050505050610637565b600091505061063756fe456e756d657261626c655365743a20696e646578206f7574206f6620626f756e647345524332303a207472616e7366657220746f20746865207a65726f2061646472657373416363657373436f6e74726f6c3a2073656e646572206d75737420626520616e2061646d696e20746f206772616e7445524332303a206275726e20616d6f756e7420657863656564732062616c616e636545524332305072657365744d696e7465725061757365723a206d75737420686176652070617573657220726f6c6520746f20756e706175736545524332303a20617070726f766520746f20746865207a65726f206164647265737345524332303a207472616e7366657220616d6f756e7420657863656564732062616c616e6365416363657373436f6e74726f6c3a2073656e646572206d75737420626520616e2061646d696e20746f207265766f6b6545524332303a207472616e7366657220616d6f756e74206578636565647320616c6c6f77616e636545524332305072657365744d696e7465725061757365723a206d7573742068617665206d696e74657220726f6c6520746f206d696e7445524332303a206275726e20616d6f756e74206578636565647320616c6c6f77616e636545524332303a206275726e2066726f6d20746865207a65726f206164647265737345524332303a207472616e736665722066726f6d20746865207a65726f206164647265737345524332303a20617070726f76652066726f6d20746865207a65726f206164647265737345524332305072657365744d696e7465725061757365723a206d75737420686176652070617573657220726f6c6520746f20706175736545524332303a2064656372656173656420616c6c6f77616e63652062656c6f77207a65726f416363657373436f6e74726f6c3a2063616e206f6e6c792072656e6f756e636520726f6c657320666f722073656c6645524332305061757361626c653a20746f6b656e207472616e73666572207768696c6520706175736564a2646970667358221220bc9b15ce54ce30b2bdb7329e157962d7e1111c49299d5670b3955f87f8df1d0d64736f6c634300060c0033"

const ERC20HandlerABI = "[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"bridgeAddress\",\"type\":\"address\"},{\"internalType\":\"bytes32[]\",\"name\":\"initialResourceIDs\",\"type\":\"bytes32[]\"},{\"internalType\":\"address[]\",\"name\":\"initialContractAddresses\",\"type\":\"address[]\"},{\"internalType\":\"address[]\",\"name\":\"burnableContractAddresses\",\"type\":\"address[]\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"_bridgeAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"_burnList\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"_contractWhitelist\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"_resourceIDToTokenContractAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"_tokenContractAddressToResourceID\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"tokenAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"fundERC20\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"contractAddress\",\"type\":\"address\"}],\"name\":\"setBurnable\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"resourceID\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"contractAddress\",\"type\":\"address\"}],\"name\":\"setResource\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"resourceID\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"depositer\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"deposit\",\"outputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"resourceID\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"executeProposal\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"tokenAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]"
const ERC20HandlerBin = "60806040523480156200001157600080fd5b5060405162000f9038038062000f9083398101604081905262000034916200025d565b8151835114620000615760405162461bcd60e51b81526004016200005890620003a2565b60405180910390fd5b600080546001600160a01b0319166001600160a01b0386161781555b8351811015620000ca57620000c18482815181106200009857fe5b6020026020010151848381518110620000ad57fe5b60200260200101516200011160201b60201c565b6001016200007d565b5060005b81518110156200010657620000fd828281518110620000e957fe5b60200260200101516200016060201b60201c565b600101620000ce565b505050505062000446565b600082815260016020818152604080842080546001600160a01b039096166001600160a01b0319909616861790559383526002815283832094909455600390935220805460ff19169091179055565b6001600160a01b03811660009081526003602052604090205460ff166200019b5760405162461bcd60e51b815260040162000058906200035e565b6001600160a01b03166000908152600460205260409020805460ff19166001179055565b80516001600160a01b0381168114620001d757600080fd5b92915050565b600082601f830112620001ee578081fd5b815162000205620001ff8262000426565b620003ff565b8181529150602080830190848101818402860182018710156200022757600080fd5b60005b8481101562000252576200023f8883620001bf565b845292820192908201906001016200022a565b505050505092915050565b6000806000806080858703121562000273578384fd5b6200027f8686620001bf565b602086810151919550906001600160401b03808211156200029e578586fd5b818801915088601f830112620002b2578586fd5b8151620002c3620001ff8262000426565b81815284810190848601868402860187018d1015620002e057898afd5b8995505b8386101562000304578051835260019590950194918601918601620002e4565b5060408b015190985094505050808311156200031e578485fd5b6200032c89848a01620001dd565b9450606088015192508083111562000342578384fd5b50506200035287828801620001dd565b91505092959194509250565b60208082526024908201527f70726f766964656420636f6e7472616374206973206e6f742077686974656c696040820152631cdd195960e21b606082015260800190565b6020808252603c908201527f696e697469616c5265736f7572636549447320616e6420696e697469616c436f60408201527f6e7472616374416464726573736573206c656e206d69736d6174636800000000606082015260800190565b6040518181016001600160401b03811182821017156200041e57600080fd5b604052919050565b60006001600160401b038211156200043c578081fd5b5060209081020190565b610b3a80620004566000396000f3fe608060405234801561001057600080fd5b50600436106100a95760003560e01c806395601f091161007157806395601f0914610127578063b07e54bb1461013a578063b8fa37361461015a578063c8ba6c871461016d578063d9caed121461018d578063e248cff2146101a0576100a9565b806307b7ed99146100ae5780630a6d55d8146100c3578063318c136e146100ec5780636a70d081146100f45780637f79bea814610114575b600080fd5b6100c16100bc366004610736565b6101b3565b005b6100d66100d13660046107b8565b6101c7565b6040516100e391906108df565b60405180910390f35b6100d66101e2565b610107610102366004610736565b6101f1565b6040516100e39190610930565b610107610122366004610736565b610206565b6100c1610135366004610758565b61021b565b61014d6101483660046107ff565b61022e565b6040516100e39190610944565b6100c16101683660046107d0565b6102e0565b61018061017b366004610736565b6102f6565b6040516100e3919061093b565b6100c161019b366004610758565b610308565b6100c16101ae366004610858565b610320565b6101bb61041f565b6101c48161044b565b50565b6001602052600090815260409020546001600160a01b031681565b6000546001600160a01b031681565b60046020526000908152604090205460ff1681565b60036020526000908152604090205460ff1681565b82610228818430856104a7565b50505050565b606061023861041f565b6000610246838501856107b8565b6000878152600160209081526040808320546001600160a01b03168084526003909252909120549192509060ff166102995760405162461bcd60e51b815260040161029090610a53565b60405180910390fd5b6001600160a01b03811660009081526004602052604090205460ff16156102ca576102c58187846104ff565b6102d6565b6102d68187308561055d565b5050949350505050565b6102e861041f565b6102f28282610571565b5050565b60026020526000908152604090205481565b61031061041f565b61031b8383836105c0565b505050565b61032861041f565b6000806060610339848601866108a2565b909350915061034e6040808401908688610a9b565b8080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201829052508a815260016020908152604080832054828801516001600160a01b039091168085526003909352922054959650909490935060ff1691506103d390505760405162461bcd60e51b815260040161029090610a53565b6001600160a01b03811660009081526004602052604090205460ff161561040757610402818360601c876105cc565b610415565b610415818360601c876105c0565b5050505050505050565b6000546001600160a01b031633146104495760405162461bcd60e51b8152600401610290906109ac565b565b6001600160a01b03811660009081526003602052604090205460ff166104835760405162461bcd60e51b8152600401610290906109e3565b6001600160a01b03166000908152600460205260409020805460ff19166001179055565b610228846323b872dd60e01b8585856040516024016104c8939291906108f3565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526105fc565b60405163079cc67960e41b815283906001600160a01b038216906379cc67909061052f9086908690600401610917565b600060405180830381600087803b15801561054957600080fd5b505af1158015610415573d6000803e3d6000fd5b8361056a818585856104a7565b5050505050565b600082815260016020818152604080842080546001600160a01b039096166001600160a01b0319909616861790559383526002815283832094909455600390935220805460ff19169091179055565b826102288184846106b3565b6040516340c10f1960e01b815283906001600160a01b038216906340c10f199061052f9086908690600401610917565b60006060836001600160a01b03168360405161061891906108c3565b6000604051808303816000865af19150503d8060008114610655576040519150601f19603f3d011682016040523d82523d6000602084013e61065a565b606091505b50915091508161067c5760405162461bcd60e51b815260040161029090610a27565b80511561022857808060200190518101906106979190610798565b6102285760405162461bcd60e51b815260040161029090610977565b61031b8363a9059cbb60e01b84846040516024016104c8929190610917565b80356001600160a01b03811681146106e957600080fd5b92915050565b60008083601f840112610700578182fd5b50813567ffffffffffffffff811115610717578182fd5b60208301915083602082850101111561072f57600080fd5b9250929050565b600060208284031215610747578081fd5b61075183836106d2565b9392505050565b60008060006060848603121561076c578182fd5b833561077781610aef565b9250602084013561078781610aef565b929592945050506040919091013590565b6000602082840312156107a9578081fd5b81518015158114610751578182fd5b6000602082840312156107c9578081fd5b5035919050565b600080604083850312156107e2578182fd5b8235915060208301356107f481610aef565b809150509250929050565b60008060008060608587031215610814578081fd5b8435935061082586602087016106d2565b9250604085013567ffffffffffffffff811115610840578182fd5b61084c878288016106ef565b95989497509550505050565b60008060006040848603121561086c578283fd5b83359250602084013567ffffffffffffffff811115610889578283fd5b610895868287016106ef565b9497909650939450505050565b600080604083850312156108b4578182fd5b50508035926020909101359150565b600082516108d5818460208701610ac3565b9190910192915050565b6001600160a01b0391909116815260200190565b6001600160a01b039384168152919092166020820152604081019190915260600190565b6001600160a01b03929092168252602082015260400190565b901515815260200190565b90815260200190565b6000602082528251806020840152610963816040850160208701610ac3565b601f01601f19169190910160400192915050565b6020808252818101527f45524332303a206f7065726174696f6e20646964206e6f742073756363656564604082015260600190565b6020808252601e908201527f73656e646572206d7573742062652062726964676520636f6e74726163740000604082015260600190565b60208082526024908201527f70726f766964656420636f6e7472616374206973206e6f742077686974656c696040820152631cdd195960e21b606082015260800190565b602080825260129082015271115490cc8c0e8818d85b1b0819985a5b195960721b604082015260600190565b60208082526028908201527f70726f766964656420746f6b656e41646472657373206973206e6f74207768696040820152671d195b1a5cdd195960c21b606082015260800190565b60008085851115610aaa578182fd5b83861115610ab6578182fd5b5050820193919092039150565b60005b83811015610ade578181015183820152602001610ac6565b838111156102285750506000910152565b6001600160a01b03811681146101c457600080fdfea2646970667358221220f0aaa680a9ce3bc63b981fedc4e78d866065049ed4c45b563afc5e1ab54280dc64736f6c634300060c0033"

func SliceTo32Bytes(in []byte) [32]byte {
	var res [32]byte
	copy(res[:], in)
	return res
}

func ToCallArg(msg ethereum.CallMsg) map[string]interface{} {
	arg := map[string]interface{}{
		"from": msg.From,
		"to":   msg.To,
	}
	if len(msg.Data) > 0 {
		arg["data"] = hexutil.Bytes(msg.Data)
	}
	if msg.Value != nil {
		arg["value"] = (*hexutil.Big)(msg.Value)
	}
	if msg.Gas != 0 {
		arg["gas"] = hexutil.Uint64(msg.Gas)
	}
	if msg.GasPrice != nil {
		arg["gasPrice"] = (*hexutil.Big)(msg.GasPrice)
	}
	return arg
}

// UserAmountToWei converts decimal user friendly representation of token amount to 'Wei' representation with provided amount of decimal places
// eg UserAmountToWei(1, 5) => 100000
func UserAmountToWei(amount string, decimal *big.Int) (*big.Int, error) {
	amountFloat, ok := big.NewFloat(0).SetString(amount)
	if !ok {
		return nil, errors.New("wrong amount format")
	}
	ethValueFloat := new(big.Float).Mul(amountFloat, big.NewFloat(gomath.Pow10(int(decimal.Int64()))))
	ethValueFloatString := strings.Split(ethValueFloat.Text('f', int(decimal.Int64())), ".")

	i, ok := big.NewInt(0).SetString(ethValueFloatString[0], 10)
	if !ok {
		return nil, errors.New(ethValueFloat.Text('f', int(decimal.Int64())))
	}

	return i, nil
}

func Transact(client ChainClient, txFabric TxFabric, to *common.Address, data []byte, gasLimit uint64) (common.Hash, error) {
	gp, err := client.GasPrice()
	if err != nil {
		return common.Hash{}, err
	}
	client.LockNonce()
	n, err := client.UnsafeNonce()
	if err != nil {
		return common.Hash{}, err
	}
	tx := txFabric(n.Uint64(), to, big.NewInt(0), gasLimit, gp, data)
	_, err = client.SignAndSendTransaction(context.TODO(), tx)
	if err != nil {
		return common.Hash{}, err
	}

	log.Debug().Msgf("hash: %v from: %s", tx.Hash(), client.From())
	_, err = client.WaitAndReturnTxReceipt(tx.Hash())
	if err != nil {
		return common.Hash{}, err
	}
	err = client.UnsafeIncreaseNonce()
	if err != nil {
		return common.Hash{}, err
	}
	client.UnlockNonce()
	return tx.Hash(), nil
}
